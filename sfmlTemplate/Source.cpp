#include <SFML/Graphics.hpp>
#include <iostream>
#include "LineShape.h"

int main() {
	float startPoints[] = { 
6927.994644188089,12783.998718237972,
6692.539969294814,12614.754116825734,
6656.155131547893,12318.606024190747,
6648.974866047419,12018.703814458579,
6644.330900498177,11718.74276396849,
6641.56646258745,11418.760723389949,
6644.628805998537,11118.776104324925,
6664.946333910324,10819.59294015477,
6741.375697813068,10530.70248966193,
6873.541038194011,10261.477013440217,
7031.281624131707,10006.418480229653,
7203.835710378107,9761.043685961547,
7385.740876603336,9522.502597648345,
7561.708897297722,9280.003895373418,
7642.466287791064,8993.140789243691,
7648.679600615896,8693.312853981683,
7638.270249964875,8393.526117659723,
7619.775566488577,8094.085880865703,
7599.409386023277,7794.813334748867,
7527.501077987254,7505.499107129872,
7269.246449850805,7378.535163675697,
7019.3261160032125,7214.643479795428,
6797.517469619996,7012.717998273074,
6528.975060637938,6948.994790648614,
6271.027300707998,7101.687032575743,
5992.826440843057,7213.301570567452,
5703.9217964182235,7293.811883852704,
5410.097029572332,7354.05719519553,
5111.5402075024995,7381.025747402797,
4811.590487047468,7380.83534540745,
4512.157822954789,7363.12086053972,
4214.190469536971,7328.52288009599,
3918.71312672844,7276.854881039918,
3627.2345486730696,7206.1825390006825,
3342.830117014477,7111.484642154566,
3079.7391597193373,6967.717520633242,
2831.5452775907665,6799.300613740853,
2592.7053560099316,6617.812999427777,
2360.831790616961,6427.467902524586,
2135.0534572171687,6229.945253501713,
1915.3113178780036,6025.720046207566,
1702.4084504317452,5814.391594304445,
1498.5643515785712,5594.303426743073,
1310.243918767186,5360.930701540446,
1166.2612142529852,5098.894099852347,
1078.8430668027038,4812.098739873663,
1017.2855077717572,4518.551357197937,
973.5413211940516,4221.787916521925,
943.7442460456413,3923.2958109364217,
923.6998078860262,3623.9783442587723,
913.4894054081742,3324.1658255499406,
919.7534904897966,3024.3170415099744,
894.466859026031,2729.6104633722553,
657.3139596984411,2795.62232672788,
388.98561244644225,2873.4390405919403,
263.82470126273984,2602.583066878884,
210.96287935994042,2309.557996037229,
269.78069464862347,2017.932010922581,
60.09690444623993,1803.8735221393454,
61.80116124697088,1533.7375841050089,
254.2891078505345,1303.9167077064048,
456.37514457938596,1082.183816942946,
678.9003369553488,881.3836789228048,
924.0155980016862,708.6570471756768,
1188.50247878773,567.7292604122188,
1480.025384293699,516.6958130963553,
1779.882746703468,516.9409844399894,
2077.291155622699,480.46173587634803,
2357.468550426798,375.7447699855402,
2637.7222407411064,269.3141191612285,
2928.8282237281055,197.3898082965261,
3225.3108318715986,152.25849016752008,
3524.2854865069016,127.61436053427693,
3823.563509277524,106.90633472283011,
4122.893706272695,86.86547169584045,
4422.247309799677,67.17811660618412,
4721.624722920628,47.86485275955479,
5021.070354956247,29.49990531489221,
5320.6656112976325,13.968369805284105,
5620.547991069248,7.051245582945114,
5920.47039009999,10.670572457868275,
6200.533507571439,110.28767661484017,
6398.74617809733,326.9138840733449,
6281.149257505218,595.44109221916,
6118.617753357756,846.9644301095777,
6272.562324085224,1031.3998374294442,
6571.331130922552,1058.083863516731,
6848.911506446962,1170.5824696243435,
7126.049853850415,1285.1454330853812,
7419.979345198823,1320.861763969373,
7638.578048957769,1120.8243997368018,
7879.4267083314135,945.3550424719219,
8133.8024483702975,786.6317620646107,
8379.069431438067,613.8943085804658,
8629.590480944198,448.9341789579481,
8900.47300463394,321.9189848877286,
9197.229430532243,287.06927695868944,
9497.2109334606,289.1495774595743,
9796.644134950631,306.782206989526,
10093.790307233168,347.3022518811806,
10381.515015173805,429.03480872201226,
10537.7337280174,660.401983519548,
10371.275465285953,900.986437155633,
10122.450108432506,1068.431131286923,
9868.590898434371,1228.3023276568479,
9619.300739002814,1395.0972216310834,
9408.988174805207,1605.7424694726992,
9346.198860745877,1894.2724662735945,
9494.512371565017,2147.4486318335967,
9769.581713430793,2259.608347114324,
10054.965341767935,2349.8395592567044,
10276.811388321687,2546.1224843260134,
10400.93319900945,2817.7751866457693,
10446.300176021901,3113.8344115696545,
10468.975483488544,3412.9125448658633,
10539.59002196253,3703.42791557079,
10653.181692692728,3979.9316766056145,
10695.322142780096,4276.704172827608,
10709.716763890294,4576.262562225437,
10654.419891654048,4867.409376266412,
10491.181345878851,5118.707406478761,
10521.840902327102,5399.4059747526735,
10773.434096382596,5539.563323602735,
11070.636773170774,5579.849638680181,
11364.570144386194,5639.672135791723,
11653.455079304476,5720.111041104518,
11898.270426511765,5886.0781970620155,
12089.936440036128,6116.697680368068,
12266.238937326552,6359.424938531309,
12424.318991780669,6612.503571025163,
12414.776232431299,6910.255196367916,
12276.428691594154,7173.991395413152,
12053.21544378021,7372.875254526385,
11915.92553908502,7638.4908947080985,
11791.340625834115,7911.146210160779,
11621.694005418834,8158.360785291306,
11457.576335890106,8409.450774990117,
11296.479546731303,8662.52933791536,
11116.001683736811,8901.699046924046,
10869.43666768074,9069.353788833832,
10591.48740392644,9181.479207827795,
10299.270751953125,9247.739891052246,
10002.244451349063,9284.496130645639,
9929.627534295305,9559.783347831188,
9909.58117768252,9859.118758704217,
9883.844372834343,10157.880395121363,
9824.163211317966,10451.77751167072,
9744.384570182548,10740.939677408054,
9652.155280162426,11026.389812241312,
9550.87832127318,11308.774897313298,
9440.361411757767,11587.661583438516,
9319.948232077222,11862.417762464509,
9188.792685062272,12132.189578536078,
9041.947756808411,12393.718995170659,
8809.130731877742,12553.047932373767,
8516.063553769038,12497.745484030776,
8356.752772438136,12265.757903026515,
8333.260453559213,11966.813674704992,
8199.919543577567,11807.986054789064,
8017.759467773136,12045.429265238348,
7858.3754921820655,12299.554613419983,
7665.5143715950835,12528.608031224168,
7427.0962295594845,12709.197175325877,
7141.227671734057,12793.837010718882,
	};

	srand(time(NULL));
	sf::RenderWindow window(sf::VideoMode(1920, 1080), "line rendering");
	spe::LineShape LS;
	/*
	LS.lines.push_back(spe::Line(ml::Vector2F(0, 0), ml::Vector2F(5, 5)));
	LS.lines.push_back(spe::Line(ml::Vector2F(5, 5), ml::Vector2F(10, 0)));
	LS.lines.push_back(spe::Line(ml::Vector2F(10, 0), ml::Vector2F(15, 5)));
	LS.lines.push_back(spe::Line(ml::Vector2F(15, 5), ml::Vector2F(20, 0)));
	LS.lines.push_back(spe::Line(ml::Vector2F(20, 0), ml::Vector2F(0, 0)));
	*/
	//LS.lines.push_back(spe::Line(ml::Vector2F(5, 0), ml::Vector2F(5, 20)));
	//LS.lines.push_back(spe::Line(ml::Vector2F(5, 20), ml::Vector2F(10, 30)));
	//LS.lines.push_back(spe::Line(ml::Vector2F(10, 30), ml::Vector2F(5, 0)));
	/*
	spe::Line lineTest(ml::Vector2F(3, 0), ml::Vector2F(6, 6)); // border bli 7
	float dist = lineTest.colDist(5.0f);
	std::cout << "TEST DIST = " << dist << std::endl;
	*/
	
	/*LS.lines.push_back(spe::Line(ml::Vector2F(2, 7), ml::Vector2F(7, 12)));
	LS.lines.push_back(spe::Line(ml::Vector2F(7, 12), ml::Vector2F(12, 7)));
	LS.lines.push_back(spe::Line(ml::Vector2F(12, 7), ml::Vector2F(7, 2)));
	LS.lines.push_back(spe::Line(ml::Vector2F(7, 2), ml::Vector2F(2, 7)));
	*/
	std::vector<ml::Vector2F> points;
	/*
	int corners = 100;
	for (int i = 0; i < corners; i++) {
		float step = 3.1415926535f * 2.0f / (float)corners * (float)i;
		newPos = ml::Vector2F(((std::cos(step)+1.f)*6.0f), (std::sin(step)+1.f)*6.0f);
		points.push_back(newPos);
	}
	*/
	for (int i = 0; i < 164; i++) {
		auto pos = i * 2;
		points.push_back(ml::Vector2F(startPoints[pos] / 150.0f, startPoints[pos+1] / 150.0f));
	}
	LS.loadLinesFromPoints(points);
	sf::Sprite img; 
	sf::Texture txt; 
	auto pixels = LS.render();
	ml::Vector2I res = LS.getResolution();
	txt.create(res.x, res.y);
	txt.update(pixels);
	img.setTexture(txt);
	//line(ml::Vector2F(20,10), ml::Vector2F(0,0));

	while (window.isOpen()) {

		window.clear();
		window.draw(img);
		window.display();
	}
}